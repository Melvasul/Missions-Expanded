namespace = ME_Naples_Events

country_event = {
	id = ME_Naples_Events.1
	title = ME_Naples_Events.EVTNAME1
	desc = ME_Naples_Events.EVTDESC1
	picture = HARBOUR_eventPicture

	fire_only_once = yes

	trigger = {
		tag = NAP
		owns = 121
	}

	mean_time_to_happen = {
		months = 24
	}

	option = {
		name = ME_Naples_Events1.EVTOPT1
		ai_chance = {
			factor = 33
		}
		modifier = {
			
		}
		FRA = {
			country_event = {
				id = ME_Naples_Events.2
			}
		}

	}

	option = {
		name = ME_Naples_Events1.EVTOPT2
		ai_chance = {
			factor = 33
		}
		modifier = {

		}
		random_country = {
			limit = {
				NOT = { tag = NAP }
				culture_group = latin
				OR = {
					army_strength = {
						who = NAP
						value = 0.75
					}
					has_opinion = {
						who = NAP
						value = 100
					}
				}
			}
			country_event = { id = ME_Naples_Events.3 }
		}
	}
	option = {
		name = ME_Naples_Events1.EVTOPT3
		ai_chance = {
			factor = 33
		}
		modifier = {
			
		}
		country_event = {
			id = ME_Naples_Events.4
		}
	}
}

country_event = { # For France
	id = ME_Naples_Events.2
	title = ME_Naples_Events.EVTNAME2
	desc = ME_Naples_Events.EVTDESC2
	picture = HARBOUR_eventPicture

	is_triggered_only = yes

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = ME_Naples_Events2.EVTOPT1
		ai_chance = {
			factor = 33
		}
		modifier = {
	
		}
		ROOT = {
			add_treasury = -100
			add_manpower = -5
			add_opinion = {
				who = FROM
				modifier = nap_helped_rebellion
			}
		}
		FROM = {
			add_treasury = 50
			add_manpower = 5
			create_general = {
				tradition = 40
			}
			add_opinion = {
				who = ROOT
				modifier = nap_helped_rebellion
			}
		}
		121 = {
			infantry = FROM
			infantry = FROM
			infantry = FROM
		}
	}

	option = {
		name = ME_Naples_Events2.EVTOPT2
		ai_chance = {
			factor = 33
		}
		modifier = {

		}
		create_alliance = FROM
		add_trust = {
			who = FROM
			value = 50
			mutual = yes
		}
		add_historical_friend = FROM
		grant_independence = yes
		add_opinion = {
			who = FROM
			modifier = nap_helped_rebellion_war
		}
		FROM = {
			add_historical_friend = ROOT
			add_opinion = {
				who = ROOT
				modifier = nap_helped_rebellion_war
			}
		}
	}

	option = {
		name = ME_Naples_Events2.EVTOPT3
		ai_chance = {
			factor = 33
		}
		modifier = {
		}
		random_country = {
			limit = {
				NOT = { tag = NAP }
				culture_group = latin
				OR = {
					army_strength = {
						who = NAP
						value = 0.75
					}
					has_opinion = {
						who = NAP
						value = 100
					}
				}
			}
			country_event = { id = ME_Naples_Events.3 }
		}
		add_opinion = {
			who = FROM
			modifier = nap_denied_help
		}
		FROM = {
			add_opinion = {
				who = ROOT
				modifier = nap_denied_help
			}
		}
	}
}

country_event = { # For the Italian Nations
	id = ME_Naples_Events.3
	title = ME_Naples_Events.EVTNAME3
	desc = ME_Naples_Events.EVTDESC3
	picture = HARBOUR_eventPicture

	mean_time_to_happen = {
		months = 3
	}

	is_triggered_only = yes

	option = {
		name = ME_Naples_Events3.EVTOPT1
		ai_chance = {
			factor = 33
		}
		modifier = {

		}
		ROOT = {
			add_treasury = -100
			add_manpower = -5
			add_opinion = {
				who = NAP
				modifier = nap_helped_rebellion
			}
		}
		NAP = {
			add_treasury = 50
			add_manpower = 5
			create_general = {
				tradition = 40
			}
			add_opinion = {
				who = ROOT
				modifier = nap_helped_rebellion
			}
		}
		121 = {
			infantry = NAP
			infantry = NAP
			infantry = NAP
		}
	}

	option = {
		name = ME_Naples_Events3.EVTOPT2
		ai_chance = {
			factor = 33
		}
		modifier = {

		}
		create_alliance = NAP
		add_opinion = {
			who = NAP
			modifier = nap_helped_rebellion_war
		}
		NAP = {
			add_opinion = {
				who = ROOT
				modifier = nap_helped_rebellion_war
			}
		}
	}

	option = {
		name = ME_Naples_Events3.EVTOPT3
		ai_chance = {
			factor = 33
		}
		modifier = {

		}
		add_opinion = {
			who = NAP
			modifier = nap_denied_help
		}
		NAP = {
			country_event = {
				id = ME_Naples_Events.4
			}
			add_opinion = {
				who = ROOT
				modifier = nap_denied_help
			}
		}
	}
}

country_event = { #Naples stands alone
	id = ME_Naples_Events.4
	title = ME_Naples_Events.EVTNAME4
	desc = ME_Naples_Events.EVTDESC4
	picture = HARBOUR_eventPicture
	mean_time_to_happen = {
		months = 3
	}

	is_triggered_only = yes

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = ME_Naples_Events4.EVTOPT1
		ai_chance = {
			factor = 100
		}
		modifier = {
		}
		random_province = {
			limit = {
				area = sicily_area
				owned_by = ARA
			}
			spawn_rebels = {
				friend = NAP
				type = naples_rebels
				size = 3
			}
		}
	}
}

country_event = { #Friends or Foes
	id = ME_Naples_Events.5
	title = ME_Naples_Events.EVTNAME5
	desc = ME_Naples_Events.EVTDESC5
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = ME_Naples_Events5.EVTOPT1
		
		ai_chance = {
			factor = 50
		}
		modifier = {
			factor = 0
			NOT = {
				num_of_free_diplomatic_relations = 1
			}
		}
		PAP = {
			add_historical_friend = ROOT
		}
		add_historical_friend = PAP
		125 = { #Palermo
			limit = {
				owned_by = ROOT
			}
			add_cardinal = yes
		}
		emilia_romagna_area = {
			limit = {
				owned_by = PAP
				NOT = {
					is_core = ROOT
				}
			}
			add_core = NAP
			cede_province = NAP
			remove_core = PAP
		}
		tuscany_area = {
			limit = {
				NOT = { 
					owned_by = ROOT
				}
				NOT = { 
					is_core = ROOT 
				}
			}
			add_permanent_claim = ROOT
		}
	}

	option = {
		name = ME_Naples_Events5.EVTOPT2

		ai_chance = {
			factor = 50
		}
		add_historical_rival = PAP
		hidden_effect = {
		every_province = {
				limit = {
					owned_by = PAP
					region = italy_region
				}
				add_permanent_claim = ROOT
			}
		}
		create_general = {
			tradition = 50
		}
	}
}

country_event = { #Restoring the Glory of Greece
	id = ME_Naples_Events.6
	title = ME_Naples_Events.EVTNAME6
	desc = ME_Naples_Events.EVTDESC6
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = ME_Naples_Events6.EVTOPT1
		
		ai_chance = {
			factor = 50
		}
		modifier = {
			factor = 0
			NOT = {
				num_of_free_diplomatic_relations = 1
			}
		}
		every_province = {
			limit = {
				NOT = {
					is_core = GRE
				}
				owned_by = ROOT
				culture = greek
			}
			add_core = GRE
		}
		release = GRE
		GRE = {
			set_dynasty = NAP
			change_government = monarchy
			add_government_reform = feudalism_reform
		}
		if = {
			limit = {
				is_expanded_mod_active = { mod = subjects }
			}
			create_subject = {
				subject_type = brother_kingdom
				subject = GRE
			}
		}
		else = { create_march = GRE }
		add_country_modifier = {
			name = nap_subject_tribute
			duration = -1
		}
		northern_greece_area = {
			limit = {
				NOT = {
					is_core = GRE
				}
			}
			add_core = GRE
			add_permanent_claim = GRE
		}
		macedonia_area = {
			limit = {
				NOT = {
					is_core = GRE
				}
			}
			add_core = GRE
			add_permanent_claim = GRE
		}
		morea_area = {
			limit = {
				NOT = {
					is_core = GRE
				}
			}
			add_core = GRE
			add_permanent_claim = GRE
		}		
		aegean_archipelago_area = {
			limit = {
				NOT = {
					is_core = GRE
				}
			}
			add_core = GRE
			add_permanent_claim = GRE
		}
	}

	option = {
		name = ME_Naples_Events6.EVTOPT2

		ai_chance = {
			factor = 50
		}
		custom_tooltip = NAP_EVENT6_SUBJECT_SLAVE_TOOLTIP
		hidden_effect = {
			every_province = {
				limit = {
					owned_by = ROOT
					region = italy_region
				}
				add_province_modifier = {
					name = nap_subject_slaves
					duration = 9125
				}
			}
		}
	}
}

country_event = { #The Throne of Provence for Provence
	id = ME_Naples_Events.7
	title = ME_Naples_Events.EVTNAME7
	desc = ME_Naples_Events.EVTDESC7
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	option = {
		name = ME_Naples_Events7.EVTOPT1

		ai_chance = {
			factor = 50
		}
		FROM = {
			if = {
				limit = {
					is_expanded_mod_active = { mod = subjects }
				}
				create_subject = {
					subject_type = brother_kingdom
					subject = ROOT
				}
			}
			else = {
				create_union = ROOT
			}
		}
	}

	option = {
		name = ME_Naples_Events7.EVTOPT2

		ai_chance = {
			factor = 50
		}
		add_casus_belli = {
			type = cb_insult
			target = FROM
		}
		FROM = {
			add_casus_belli = {
				type = cb_restore_personal_union
				months = 300
				target = ROOT
			}
		}
	}
}

country_event = { #The Crown of Jerusalem
	id = ME_Naples_Events.8
	title = ME_Naples_Events.EVTNAME8
	desc = ME_Naples_Events.EVTDESC8
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = ME_Naples_Events8.EVTOPT1
		
		ai_chance = {
			factor = 50
		}
		add_years_of_income = -1
		palestine_area = {
			limit = {
				NOT = { 
					owned_by = ROOT 
				}
			}
			add_permanent_claim = ROOT
		}
		add_country_modifier = {
			name = nap_defender_christianity
			duration = -1
		}
		every_country = {
			limit = {
				religion = catholic
			}
			add_opinion = {
				who = ROOT
				modifier = nap_crown_himself
			}
		}
	}
	option = {
		name = ME_Naples_Events8.EVTOPT2

		ai_chance = {
			factor = 50
		}
		if = {
			limit = {
				religion = catholic
			}
			add_papal_influence = 25
		}
		else_if = {
			limit = {
				religion = protestant
			}
			add_church_power = 100
		}
		if = {
			limit = {
				stability = 3
			}
			add_adm_power = 100
		}
		else_if = {
			add_stability = 1
		}
		every_country = {
			limit = {
				religion = catholic
			}
			add_opinion = {
				who = ROOT
				modifier = nap_refuse_crown
			}
		}
	}
}